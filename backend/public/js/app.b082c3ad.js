(function(t){function e(e){for(var s,i,o=e[0],u=e[1],c=e[2],d=0,g=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&g.push(r[i][0]),r[i]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(t[s]=u[s]);l&&l(e);while(g.length)g.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],s=!0,o=1;o<n.length;o++){var u=n[o];0!==r[u]&&(s=!1)}s&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var s={},r={app:0},a=[];function i(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=s,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var l=u;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1:function(t,e){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main-layout",attrs:{id:"app"}},[n("main-header"),n("router-view"),n("main-footer")],1)},a=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"main-header flex direction-column"},[n("div",{staticClass:"nav-container flex space-between"},[n("router-link",{attrs:{to:"/",exact:""}},[n("h1",{staticClass:"logo"},[t._v("JUKEBOX")])]),n("form",{staticClass:"search",on:{submit:function(e){return e.preventDefault(),t.submitSearch(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchStr,expression:"searchStr"}],staticClass:"searchTerm",attrs:{type:"text",placeholder:"Search"},domProps:{value:t.searchStr},on:{input:function(e){e.target.composing||(t.searchStr=e.target.value)}}}),t._m(0)]),n("nav",{staticClass:"flex align-center",on:{click:t.closeMenu}},[n("router-link",{attrs:{to:"/",exact:""}},[t._v("Home")]),n("router-link",{attrs:{to:"/station"}},[t._v("Stations")]),n("router-link",{attrs:{to:"/about"}},[t._v("About")]),n("loggedin-user")],1),n("div",{staticClass:"screen",on:{click:t.toggleMenu}}),n("button",{staticClass:"menu-btn",on:{click:t.toggleMenu}},[t._v("☰")])],1),n("div",{staticClass:"hero flex direction-column align-center",class:t.heroSize},[n("h2",[t._v("Make and Discover Playlists")]),n("router-link",{staticClass:"buttons create-station-btn",attrs:{to:"/station/edit"}},[t._v("Create A New Station")])],1)])},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"searchButton",attrs:{type:"submit"}},[n("i",{staticClass:"fa fa-search"})])}],u=(n("b0c0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.loggedinUser?n("section",{staticClass:"loggedin-user"},[n("img",{attrs:{src:t.loggedinUser.imgUrl}}),n("div",{staticClass:"user-options"},[n("p",[t._v("Hello "+t._s(t.loggedinUser.fullName))]),t.isGuestUser?[n("router-link",{staticClass:"link-to-in-options",attrs:{to:"/login"}},[n("p",[t._v("Login")])]),n("router-link",{staticClass:"link-to-in-options",attrs:{to:"/signup"}},[n("p",[t._v("Sign up")])])]:[n("router-link",{staticClass:"link-to-in-options",attrs:{to:"/user/"+t.loggedinUser._id}},[n("p",[t._v("Profile Page")])]),n("button",{staticClass:"buttons",on:{click:t.logout}},[t._v("Logout")])]],2)]):t._e()}),c=[],l={name:"loggedinUser",computed:{loggedinUser:function(){return this.$store.getters.loggedinUser},isGuestUser:function(){return this.$store.getters.isGuestUser}},methods:{logout:function(){this.$store.dispatch({type:"logout"})}}},d=l,g=n("2877"),p=Object(g["a"])(d,u,c,!1,null,null,null),m=p.exports,f={name:"mainHeader",data:function(){return{isHomePage:!1,searchStr:""}},created:function(){this.isHomePage="homePage"==this.$route.name},computed:{heroSize:function(){return this.isHomePage?"full":"small"}},methods:{toggleMenu:function(){document.body.classList.toggle("menu-open")},closeMenu:function(){document.body.classList.remove("menu-open")},submitSearch:function(){this.$router.push({path:"/station",query:{searchTerm:this.searchStr}}),this.searchStr=""}},watch:{$route:function(t,e){this.isHomePage="homePage"===t.name}},components:{loggedinUser:m}},h=f,v=Object(g["a"])(h,i,o,!1,null,null,null),y=v.exports,b=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},w=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"main-footer"},[n("small",[t._v("copyright © Rotem, Limor, Kareene 2020")])])}],S={name:"mainFooter"},_=S,C=Object(g["a"])(_,b,w,!1,null,null,null),x=C.exports,k={created:function(){this.$store.dispatch({type:"loadStations"}),this.$store.dispatch({type:"loadTags"})},components:{mainHeader:y,mainFooter:x}},U=k,P=Object(g["a"])(U,r,a,!1,null,null,null),O=P.exports,R=n("9483");Object(R["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var j=n("8c4f"),$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"home-page content-container"},t._l(t.tags,(function(e){return n("section",{key:e,staticClass:"stations-by-tag"},[n("div",{staticClass:"tag-container flex space-between"},[n("h2",[t._v(t._s(e))]),n("router-link",{attrs:{to:{path:"/station",query:{tag:e}}}},[t._v("See More +")])],1),n("stationList",{attrs:{stations:t.getStationsByTag(e)}})],1)})),0)},T=[],M=(n("4de4"),n("caad"),n("2532"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.stations?n("ul",{staticClass:"station-list"},t._l(t.stations,(function(e){return n("station-preview",{key:e._id,attrs:{station:e},on:{remove:function(e){return t.$emit("remove",e)}}})})),1):t._e()}),I=[],N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-link",{attrs:{to:"/station/"+t.station._id}},[t.station?n("li",{staticClass:"station-preview ratio-square"},[t.station.imgUrl?n("img",{attrs:{src:t.station.imgUrl}}):t._e(),n("div",{staticClass:"content flex direction-column space-between"},[n("div",{staticClass:"card-head"},[n("h3",{staticClass:"station-name"},[t._v(t._s(t.station.name))]),n("p",{staticClass:"station-creator"},[t._v("by "+t._s(t.station.createdBy.fullName))])]),n("i",{staticClass:"far fa-play-circle play preview-details"}),n("div",[n("small",[n("i",{staticClass:"fas fa-heart"}),t._v(" "+t._s(t.likesCount))]),n("small",[n("i",{staticClass:"far fa-clock"}),t._v(" "+t._s(t.songsCount)+" tracks")])])])]):t._e()])},E=[],B={props:{station:Object},computed:{likesCount:function(){return this.station.likedBy.length},songsCount:function(){return this.station.songs.length}}},A=B,L=Object(g["a"])(A,N,E,!1,null,null,null),q=L.exports,D={props:{stations:Array},components:{stationPreview:q}},z=D,V=Object(g["a"])(z,M,I,!1,null,null,null),H=V.exports,F={name:"homePage",created:function(){this.$store.dispatch({type:"loadTags"})},computed:{tags:function(){return this.$store.getters.tags}},methods:{getStationsByTag:function(t){return this.$store.getters.stations.filter((function(e){return e.tags.includes(t)}))}},components:{stationList:H}},J=F,G=Object(g["a"])(J,$,T,!1,null,null,null),K=G.exports,W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"about-page content-container"},[n("h2",[t._v("About Us")]),n("ul",{staticClass:"creators-list"},t._l(this.creators,(function(e,s){return n("li",{key:e._id,style:[s%2===0?{backgroundColor:"rgb(109, 82, 113)"}:{backgroundColor:"#e9eaea"}]},[n("img",{staticClass:"ratio-square",attrs:{src:e.imgUrl}}),n("div",{staticClass:"text-about-container"},[n("h3",[t._v(t._s(e.name))]),n("p",[t._v(t._s(e.about))]),n("p",[t._v("Hobbies: "+t._s(e.hobbies))]),n("section",{staticClass:"social-sec"},[n("a",{style:[s%2===0?{color:"white"}:{color:"rgb(109, 82, 113)"}],attrs:{href:e.linkedinUrl}},[n("i",{staticClass:"fab fa-linkedin"})]),n("a",{style:[s%2===0?{color:"white"}:{color:"rgb(109, 82, 113)"}],attrs:{href:e.facebookUrl}},[n("i",{staticClass:"fab fa-facebook-square"})])])])])})),0)])},X=[],Q={name:"aboutPage",data:function(){return{creators:[{name:"Rotem Yehiel",_id:"wz0r7hntqyvcilduhxlm",about:"A full stack web developer. Holder of a B.Sc. Technology Management -Information Systems Management from HIT Israel. Experience with Vue.js ,React ,JavaScript ,HTML ,CSS ,SASS ,Node.js and Mongo.db.",hobbies:"Backing, traveling and aesthetics.",imgUrl:"https://res.cloudinary.com/dpjz7lloq/image/upload/v1585601840/wz0r7hntqyvcilduhxlm.jpg",linkedinUrl:"https://www.linkedin.com/in/rotem-yehiel-143608163/",facebookUrl:"https://www.facebook.com/rotem.yehi"},{name:"Kareene Komet",_id:"wz0r5hntqyvcilduhxlm",about:"Full Stack software developer and ex-UNIX system administrator. Graduate of “Bismach” IDF programming course (AKA: “Mamram”) as well as MisterBit Coding Academy. Experience with: Vue.js, React, Angular, Javascript, HTML, CSS, SASS, Node.js, Mongo.db.",hobbies:"Nature, Knitting",imgUrl:"https://res.cloudinary.com/dpjz7lloq/image/upload/v1585081829/qwvv4sn92jgnijtob2ze.jpg",linkedinUrl:"https://www.linkedin.com/in/kareene-komet-975ba23/",facebookUrl:"https://www.facebook.com/kareene.komet"},{name:"Limor Abaev",_id:"wz0r2hntqyvcilduhxlm",about:"A full stack web developer. Holder of a B.Sc. Technology Management -Information Systems Management from HIT Israel. Experience with Vue.js ,React ,JavaScript ,HTML ,CSS ,SASS ,Node.js and Mongo.db.",hobbies:"Backing, traveling and aesthetics.",imgUrl:"https://res.cloudinary.com/dpjz7lloq/image/upload/v1585598647/chpd4kengxgfitziyshw.jpg",linkedinUrl:"https://www.linkedin.com/in/rotem-yehiel-143608163/",facebookUrl:"https://www.facebook.com/rotem.yehi"}]}},computed:{loggedinUser:function(){return this.$store.getters.loggedinUser},color:function(){return"#e9eaea"}}},Y=Q,Z=Object(g["a"])(Y,W,X,!1,null,null,null),tt=Z.exports,et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"stations-page content-container"},[t.isStationLoaded?n("station-list",{attrs:{stations:t.stations}}):t._e()],1)},nt=[],st=(n("96cf"),n("1da1")),rt=(n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("99af"),n("bc3a")),at=n.n(rt),it="/api/",ot=at.a.create({withCredentials:!0}),ut={get:function(t,e){return ct(t,"GET",e)},post:function(t,e){return ct(t,"POST",e)},put:function(t,e){return ct(t,"PUT",e)},delete:function(t,e){return ct(t,"DELETE",e)}};function ct(t){return lt.apply(this,arguments)}function lt(){return lt=Object(st["a"])(regeneratorRuntime.mark((function t(e){var n,s,r,a=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"get",s=a.length>2&&void 0!==a[2]?a[2]:null,t.prev=2,t.next=5,ot({url:"".concat(it).concat(e),method:n,data:s});case 5:return r=t.sent,t.abrupt("return",r.data);case 9:t.prev=9,t.t0=t["catch"](2),401===t.t0.response.status&&Fe.push("/");case 12:case"end":return t.stop()}}),t,null,[[2,9]])}))),lt.apply(this,arguments)}var dt={query:gt,getTags:pt,getById:mt,remove:ht,save:vt,getEmptyStation:yt,getEmptyFilter:ft};function gt(t){var e=new URLSearchParams(t);return console.log("station?".concat(e)),ut.get("station?".concat(e))}function pt(){return ut.get("station/tag")}function mt(t){return ut.get("station/".concat(t))}function ft(){return{name:"",tag:"",createdBy:"",_sort:"name",_order:1}}function ht(t){return ut.delete("station/".concat(t))}function vt(t){return t._id?ut.put("station/".concat(t._id),t):ut.post("station",t)}function yt(){return{name:"",imgUrl:"",tags:[],likedBy:[],songs:[],chatMsgs:[]}}var bt={name:"stationPage",data:function(){return{isStationLoaded:!1}},created:function(){var t=this;return Object(st["a"])(regeneratorRuntime.mark((function e(){var n,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(r in n=t.$route.query,s=dt.getEmptyFilter(),n)"searchTerm"===r?(s.name=n[r],s.createdBy=n[r]):s[r]=n[r];return e.next=5,t.$store.dispatch({type:"setFilterBy",filterBy:s});case 5:t.isStationLoaded=!0;case 6:case"end":return e.stop()}}),e)})))()},destroyed:function(){var t=dt.getEmptyFilter();this.$store.dispatch({type:"setFilterBy",filterBy:t})},computed:{stations:function(){return this.$store.getters.stations}},components:{stationList:H}},wt=bt,St=Object(g["a"])(wt,et,nt,!1,null,null,null),_t=St.exports,Ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.station?n("article",{staticClass:"station-edit"},[n("header",{staticClass:"edit-header"},[n("h2",[t._v(" "+t._s(t.station._id?"Edit":"Add")+" station : "),t.station.name?n("span",[t._v(t._s(t.station.name))]):t._e()]),n("div",{staticClass:"ratio-square img-container"},[t.station.imgUrl?n("img",{attrs:{src:t.station.imgUrl}}):t._e()])]),n("div",{staticClass:"edit-form"},[n("section",{staticClass:"change-name"},[n("label",[t._v("Enter station name:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text"},domProps:{value:t.name},on:{change:t.setStationName,input:function(e){e.target.composing||(t.name=e.target.value)}}})]),n("section",{staticClass:"change-tags"},[t.station._id?n("label",[t._v("Tags:")]):t._e(),n("ul",{staticClass:"tags-list"},t._l(t.station.tags,(function(e){return n("li",{key:e,staticClass:"li-tag buttons",attrs:{"data-hover":"Remove"},on:{click:function(n){return t.removeTag(e)}}},[t._v(t._s(e))])})),0),n("div",{staticClass:"add-tags"},[t._v(" Add tags: "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.tag,expression:"tag"}],attrs:{type:"text",list:"tags"},domProps:{value:t.tag},on:{change:t.addTag,input:function(e){e.target.composing||(t.tag=e.target.value)}}}),n("datalist",{attrs:{id:"tags"}},t._l(t.tags,(function(e){return n("option",{key:e},[t._v(t._s(e))])})),0)])]),n("section",{staticClass:"songs-add-sec"},[n("h2",[t._v("Add a great song")]),n("songAdd",{staticClass:"add-song-edit song-add-in-edit",on:{"add-song":t.addSong}})],1),n("songList",{staticClass:"song-list-edit",attrs:{songs:t.station.songs},on:{"update-playlist":t.updatePlaylist}}),n("section",{staticClass:"add-img-sec"},[n("label",{attrs:{for:"img"}},[t._v("Enter station picture:")]),n("input",{attrs:{type:"file",id:"station-img",name:"station.imgUrl",accept:"image/*"},on:{change:t.setStationImage}})]),n("button",{staticClass:"edit-btn buttons",on:{click:t.saveStation}},[t._v(t._s(t.station._id?"Edit":"Add"))])],1)]):t._e()},xt=[],kt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.songs?s("section",{staticClass:"song-list"},[s("Container",{staticClass:"container-of-song-list",attrs:{"remove-on-drop-out":!0},on:{drop:t.onDrop}},t._l(t.songsCopy,(function(e){return s("Draggable",{key:e.id},[s("article",{staticClass:"song-in-list",class:{playing:e.id===t.playingSongId}},[s("section",{staticClass:"left-sec-song-line"},[t.playingSongId?s("i",{staticClass:"far fa-play-circle play-on-img",on:{click:function(n){return n.stopPropagation(),t.playSong(e)}}}):t._e(),s("img",{attrs:{src:e.imgUrl}}),s("div",{staticClass:"inner-txt-song"},[s("p",[t._v(t._s(e.title))]),s("p",{staticClass:"song-add-by-name"},[t._v("Added by: "+t._s(e.addedBy.fullName))])])]),s("transition",{attrs:{name:"fade"}},[e.id===t.playingSongId&&t.isSongPlaying?s("img",{staticClass:"playing-song-gif",attrs:{src:n("ba94")}}):t._e()])],1)])})),1)],1):t._e()},Ut=[],Pt=n("3f7d"),Ot=(n("a434"),n("2909")),Rt=function(t,e){var n=e.removedIndex,s=e.addedIndex,r=e.payload;if(null===n&&null===s)return t;var a=Object(Ot["a"])(t),i=r;return null!==n&&(i=a.splice(n,1)[0]),null!==s&&a.splice(s,0,i),a},jt=function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),s=[t[n],t[e]];t[e]=s[0],t[n]=s[1]}},$t={name:"songList",props:{songs:Array,playingSongId:String,isSongPlaying:Boolean},data:function(){return{songsCopy:JSON.parse(JSON.stringify(this.songs))}},watch:{songs:function(){this.songsCopy=JSON.parse(JSON.stringify(this.songs))}},methods:{onDrop:function(t){var e=Rt(this.songsCopy,t);this.$emit("update-playlist",e)},playSong:function(t){this.$emit("play-song",t)},removeSong:function(t){this.$emit("remove-song",t)}},components:{Container:Pt["Container"],Draggable:Pt["Draggable"]}},Tt=$t,Mt=Object(g["a"])(Tt,kt,Ut,!1,null,null,null),It=Mt.exports,Nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"song-add"},[n("form",{on:{submit:function(e){return e.preventDefault(),t.searchForSongs(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchStr,expression:"searchStr"}],staticClass:"input-with-btn",attrs:{type:"text"},domProps:{value:t.searchStr},on:{input:function(e){e.target.composing||(t.searchStr=e.target.value)}}}),n("button",{staticClass:"button-of-input buttons"},[t._v("Search")])]),t.songSearchResults.length&&t.isSearchOpen?n("section",{staticClass:"songs-list-in-search"},[n("ul",[t.isEditPage?n("li",{staticClass:"done",on:{click:t.closeSearch}},[t._v("Done")]):t._e(),t._l(t.songSearchResults,(function(e){return n("li",{key:e.id},[n("img",{attrs:{src:e.imgUrl}}),n("p",[t._v(t._s(e.title))]),n("button",{staticClass:"fas fa-plus",on:{click:function(n){return n.stopPropagation(),t.addSong(e)}}})])}))],2)]):t._e()])},Et=[],Bt=(n("c740"),n("d81d"),{getVideoSearchResults:At});function At(t){return Lt.apply(this,arguments)}function Lt(){return Lt=Object(st["a"])(regeneratorRuntime.mark((function t(e){var n,s,r,a,i,o,u,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="AIzaSyDyXgfPxeA2-fcfrl9HEuVQnfNo5lVrjGU",s="https://www.googleapis.com/youtube/v3/search",r="id,snippet",a="video",i=10,o=e,t.next=8,at.a.get("".concat(s,"?part=").concat(r,"&maxResults=").concat(i,"&type=").concat(a,"&q=").concat(o,"&key=").concat(n));case 8:return u=t.sent,c=u.data.items.map((function(t){return{id:t.id.videoId,title:qt(t.snippet.title),imgUrl:t.snippet.thumbnails.medium.url}})),t.abrupt("return",c);case 11:case"end":return t.stop()}}),t)}))),Lt.apply(this,arguments)}function qt(t){var e=new DOMParser,n=e.parseFromString("<!doctype html><body>"+t,"text/html");return n.body.textContent}var Dt={name:"songAdd",data:function(){return{searchStr:"",songSearchResults:[],isSearchOpen:!1,isEditPage:!1}},created:function(){"stationEdit"===this.$route.name&&(this.isEditPage=!0),console.log(this.$route)},methods:{searchForSongs:function(){var t=this;return Object(st["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Bt.getVideoSearchResults(t.searchStr);case 2:t.songSearchResults=e.sent,t.isSearchOpen=!0;case 4:case"end":return e.stop()}}),e)})))()},closeSearch:function(){this.isSearchOpen=!1},addSong:function(t){this.$emit("add-song",t);var e=this.songSearchResults.findIndex((function(e){return e.id===t.id}));-1!==e&&this.songSearchResults.splice(e,1)}}},zt=Dt,Vt=Object(g["a"])(zt,Nt,Et,!1,null,null,null),Ht=Vt.exports,Ft={uploadImg:Jt};function Jt(t){var e="dpjz7lloq",n="pjoqxv8c",s="https://api.cloudinary.com/v1_1/".concat(e,"/image/upload"),r=new FormData;return r.append("file",t),r.append("upload_preset",n),fetch(s,{method:"POST",body:r}).then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){return console.error(t)}))}var Gt,Kt={name:"stationEdit",data:function(){return{name:"",tag:""}},created:function(){var t=this;return Object(st["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.loadStation();case 2:t.station.createdBy&&!t.isStationCreator&&t.$router.push("/");case 3:case"end":return e.stop()}}),e)})))()},destroyed:function(){this.$store.commit({type:"unsetStation"})},computed:{station:function(){return this.$store.getters.currStation},tags:function(){return this.$store.getters.tags},isStationCreator:function(){return!this.$store.getters.isGuestUser&&this.station.createdBy._id===this.$store.getters.loggedinUser._id}},methods:{loadStation:function(){var t=this;return Object(st["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$route.params.id,e.next=3,t.$store.dispatch({type:"loadStation",stationId:n});case 3:t.name=t.station.name;case 4:case"end":return e.stop()}}),e)})))()},addSong:function(t){this.$store.commit({type:"addSong",song:t})},updatePlaylist:function(t){this.$store.commit({type:"updatePlaylist",songs:t})},addTag:function(){this.tag&&!this.station.tags.includes(this.tag)&&this.$store.commit({type:"addTag",tag:this.tag}),this.tag=""},removeTag:function(t){this.$store.commit({type:"removeTag",tag:t})},setStationImage:function(t){var e=this;return Object(st["a"])(regeneratorRuntime.mark((function n(){var s,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(s=t.target.files[0],s){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,Ft.uploadImg(s);case 5:r=n.sent,e.$store.commit({type:"setStationImg",imgUrl:r.secure_url});case 7:case"end":return n.stop()}}),n)})))()},setStationName:function(){this.name&&this.$store.commit({type:"setStationName",name:this.name})},saveStation:function(){var t="https://res.cloudinary.com/dpjz7lloq/image/upload/v1585406955/pp0wanpilvrujnlfntpu.jpg";this.station.imgUrl||this.$store.commit({type:"setStationImg",imgUrl:t}),this.$store.dispatch({type:"saveStation",station:this.station}),this.$router.push("/")}},components:{songList:It,songAdd:Ht}},Wt=Kt,Xt=Object(g["a"])(Wt,Ct,xt,!1,null,null,null),Qt=Xt.exports,Yt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.station?s("article",{staticClass:"station-details flex direction-column"},[s("header",{staticClass:"station-details-header"},[s("div",{staticClass:"img-container ratio-square"},[s("img",{staticClass:"station-img",attrs:{src:t.station.imgUrl}})]),s("section",{staticClass:"info-station-sec"},[s("h2",[t._v(t._s(t.station.name))]),s("div",{staticClass:"creator flex align-center space-between"},[s("p",{staticClass:"creator-name"},[t._v(t._s(t.station.createdBy.fullName))]),s("div",{staticClass:"ratio-square user-img"},[s("img",{attrs:{src:t.station.createdBy.imgUrl}})])]),t.isStationCreator?s("router-link",{staticClass:"edit-router",attrs:{to:"/station/edit/"+t.station._id}},[t._v("Edit station")]):t._e()],1),s("div",{staticClass:"sation-stats flex direction-column"},[s("ul",{staticClass:"tags-list"},t._l(t.station.tags,(function(e){return s("li",{key:e,staticClass:"li-tag buttons"},[t._v(t._s(e))])})),0),s("div",{staticClass:"likes-and-views-container"},[s("h4",{attrs:{title:"click to like!"}},[s("button",{staticClass:"like-btn fas fa-heart",on:{click:t.addLike}}),t._v(" "+t._s(t.likedCount)+" ")]),t._m(0)])])]),s("section",{staticClass:"playlist-chat-container content-container flex"},[!t.chatIsOn||t.chatIsOn&&!t.mobileMode?s("section",{staticClass:"songs-sec"},[s("button",{staticClass:"add-button buttons",on:{click:t.toggleAddSong}},[t._v(t._s(t.listOrAddBtn))]),t.isAddSongOpen?s("songAdd",{on:{"add-song":t.addSong}}):s("songList",{attrs:{songs:t.station.songs,playingSongId:t.playingSongId,isSongPlaying:t.isSongPlaying},on:{"play-song":function(e){return t.newSongPlayed(e,!0)},"update-playlist":t.playlistUpdated}})],1):t._e(),t.chatIsOn||!t.mobileMode?s("chat-room",{attrs:{mobileMode:t.mobileMode,currStation:t.station},on:{chatClosed:t.toggleChat}}):t._e(),t.mobileMode&&!t.chatIsOn?s("div",{staticClass:"chat-open",on:{click:t.toggleChat}},[t._m(1)]):t._e()],1),s("article",{staticClass:"player-container flex space-between align-center"},[s("section",{staticClass:"video-control-container flex direction-column align-center"},[t.playingSong?s("h3",[t._v(t._s(t.playingSong.title))]):t._e(),s("input",{directives:[{name:"model",rawName:"v-model",value:t.playerProgress,expression:"playerProgress"}],staticClass:"progress-bar",attrs:{type:"range",min:"0",max:"100"},domProps:{value:t.playerProgress},on:{input:t.songTimeUpdated,mousedown:t.stopProgress,mouseup:t.startProgress,touchstart:t.stopProgress,touchend:t.startProgress,__r:function(e){t.playerProgress=e.target.value}}}),s("section",{staticClass:"video-btns-container"},[s("button",{staticClass:"next-song-btn video-btns",on:{click:function(e){return t.newSongPlayed(t.prevSong,!0)}}},[s("i",{staticClass:"fas fa-backward"})]),t.isSongPlaying?s("button",{staticClass:"play-song-btn video-btns",on:{click:t.songToggled}},[s("i",{staticClass:"fas fa-pause"})]):s("button",{staticClass:"play-song-btn video-btns",on:{click:t.songToggled}},[s("i",{staticClass:"fas fa-play"})]),s("button",{staticClass:"prev-song-btn video-btns",on:{click:function(e){return t.newSongPlayed(t.nextSong,!0)}}},[s("i",{staticClass:"fas fa-forward"})])]),s("section",{staticClass:"audio-controls"},[s("button",{staticClass:"video-btns",on:{click:t.toggleMute}},[t.isPlayerMuted?s("i",{staticClass:"fas fa-volume-mute"}):s("i",{staticClass:"fas fa-volume-up"})]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.playerVolume,expression:"playerVolume"}],attrs:{type:"range",min:"0",max:"100"},domProps:{value:t.playerVolume},on:{input:t.updatePlayerVolume,__r:function(e){t.playerVolume=e.target.value}}})])]),s("section",{staticClass:"video-sec"},[s("img",{staticClass:"needle",attrs:{src:n("f424")}}),s("div",{staticClass:"video-container ratio-square"},[s("youtube",{ref:"youtube",attrs:{width:"100%",height:"100%","player-vars":t.playerVars},on:{ready:t.initPlayer,ended:function(e){return t.newSongPlayed(t.nextSong,!1)},playing:t.youtubePlaying,paused:t.youtubePaused}})],1),s("div",{staticClass:"vinyl"})])])]):t._e()},Zt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h4",{attrs:{title:"views"}},[n("label",{staticClass:"far fa-eye"}),t._v(" 840 ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h4",[n("i",{staticClass:"far fa-comments"})])}],te=n("8055"),ee=n.n(te),ne="/",se={setup:re,terminate:ae,on:ie,off:oe,emit:ue};function re(){Gt=ee()(ne)}function ae(){Gt=null}function ie(t,e){Gt.on(t,e)}function oe(t,e){Gt.off(t,e)}function ue(t,e){Gt.emit(t,e)}var ce=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isChatOpen?n("aside",{staticClass:"chat-room"},[n("header",{staticClass:"chat-header"},[t._v("Chat "),t.mobileMode?n("button",{staticClass:"fas fa-times",on:{click:function(e){t.closeChat&&t.$emit("chatClosed",!1)}}}):t._e()]),n("section",{ref:"msgsContainer",staticClass:"msgs-sec"},[n("label",{style:{visibility:t.userTyping?"visible":"hidden"}},[t._v(t._s(t.userTyping)+" is Typing...")]),t._l(t.messages,(function(e,s){return n("div",{key:s,staticClass:"chat-msg-line",class:[e.user===t.currUser?"user-msg-bubble":"others-msg-bubble"]},[n("label",{staticClass:"user-name-title"},[t._v(t._s(e.user)+":")]),n("div",[t._v(t._s(e.txt))])])}))],2),n("form",{staticClass:"chat-room-form",on:{submit:function(e){return e.preventDefault(),t.sendMsg(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newMessage.txt,expression:"newMessage.txt"}],staticClass:"chat-input input-with-btn",attrs:{type:"text",placeholder:"Enter your massage here..."},domProps:{value:t.newMessage.txt},on:{input:[function(e){e.target.composing||t.$set(t.newMessage,"txt",e.target.value)},t.sendTyping]}}),n("button",{staticClass:"buttons button-of-input"},[t._v("Send")])])]):t._e()},le=[],de={name:"chatRoom",props:{currStation:Object,mobileMode:Boolean},data:function(){return{currUser:"",newMessage:{txt:"",user:""},messages:[],userTyping:"",timeout:null,isChatOpen:!0}},computed:{msgsContainer:function(){return this.$refs.msgsContainer},loggedinUser:function(){return this.$store.getters.loggedinUser.fullName},username:function(){return this.loggedinUser?this.loggedinUser:"Guest"}},created:function(){se.on("chat addMsg",this.addMsg),se.on("chat displayTyping",this.displayTyping)},destroyed:function(){se.off("chat addMsg",this.addMsg),se.off("chat displayTyping",this.displayTyping)},methods:{scrollToBottom:function(){this.msgsContainer.scrollTop=this.msgsContainer.scrollHeight},addMsg:function(t){var e=this;this.messages.push(t),setTimeout((function(){e.scrollToBottom()}),100)},sendMsg:function(){this.newMessage.txt&&(this.newMessage.user=this.username,this.currUser=this.newMessage.user,se.emit("chat newMsg",this.newMessage),this.newMessage.txt="")},sendTyping:function(){se.emit("chat userTyping",this.username)},displayTyping:function(t){var e=this;this.userTyping=t,this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.userTyping=""}),1e3)},closeChat:function(t){this.isChatOpen=!1}}},ge=de,pe=Object(g["a"])(ge,ce,le,!1,null,null,null),me=pe.exports,fe={name:"stationDetails",data:function(){return{windowWidth:0,mobileMode:!1,playingSong:null,songDuration:0,playerProgress:0,playerVars:{controls:0,disablekb:1,playsinline:1},playerVolume:100,isPlayerMuted:!1,isAddSongOpen:!1,isSongPlaying:!1,interval:null,chatIsOn:!1,connectedUsers:[]}},created:function(){var t=this;return Object(st["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return se.setup(),window.addEventListener("resize",t.handleResize),t.handleResize(),e.next=5,t.loadStation();case 5:se.emit("station join",{stationId:t.station._id,user:t.loggedinUser}),se.on("player updatePlaylist",t.updatePlaylist),se.on("player pauseSong",t.pauseSong),se.on("player playSong",t.playSong),se.on("player updateSongTime",t.updateSongTime),se.on("player playNewSong",t.playNewSong);case 11:case"end":return e.stop()}}),e)})))()},destroyed:function(){se.off("playlist updatePlaylist",this.updatePlaylist),se.off("player pauseSong",this.pauseSong),se.off("player playSong",this.playSong),se.off("player updateSongTime",this.updateSongTime),se.off("player playNewSong",this.playNewSong),se.terminate(),this.$store.commit({type:"unsetStation"}),window.removeEventListener("resize",this.handleResize)},computed:{station:function(){return this.$store.getters.currStation},getUserImg:function(){},loggedinUser:function(){return this.$store.getters.loggedinUser},isStationCreator:function(){return!this.$store.getters.isGuestUser&&this.station.createdBy._id===this.loggedinUser._id},likedCount:function(){return this.station.likedBy.length},player:function(){return this.$refs.youtube.player},playingSongId:function(){return this.playingSong?this.playingSong.id:""},nextSong:function(){var t=this,e=this.station.songs.findIndex((function(e){return e.id===t.playingSong.id}));return e++,e===this.station.songs.length&&(e=0),this.station.songs[e]},prevSong:function(){var t=this,e=this.station.songs.findIndex((function(e){return e.id===t.playingSong.id}));return e--,e<0&&(e=this.station.songs.length-1),this.station.songs[e]},listOrAddBtn:function(){return this.isAddSongOpen?"Return to playlist":"Add a new song"}},methods:{handleResize:function(){this.windowWidth=window.innerWidth,this.windowWidth>740?this.mobileMode=!1:this.mobileMode=!0},loadStation:function(){var t=this;return Object(st["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$route.params.id,e.next=3,t.$store.dispatch({type:"loadStation",stationId:n});case 3:case"end":return e.stop()}}),e)})))()},youtubePlaying:function(){var t=this;return Object(st["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isSongPlaying=!0,e.next=3,t.player.getDuration();case 3:t.songDuration=e.sent,t.startProgress();case 5:case"end":return e.stop()}}),e)})))()},youtubePaused:function(){this.isSongPlaying=!1,this.stopProgress()},startProgress:function(){this.interval&&clearInterval(this.interval),this.interval=setInterval(this.advancePlayerProgress,1e3)},stopProgress:function(){clearInterval(this.interval)},advancePlayerProgress:function(){var t=this;return Object(st["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.player.getCurrentTime();case 2:n=e.sent,t.playerProgress=n/t.songDuration*100;case 4:case"end":return e.stop()}}),e)})))()},initPlayer:function(){var t=this;return Object(st["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:se.emit("player firstSongRequsted"),setTimeout((function(){t.playingSong||t.playNewSong()}),3e3);case 2:case"end":return e.stop()}}),e)})))()},newSongPlayed:function(t,e){this.playNewSong(t),se.emit("player newSongPlayed",{song:t,userInitiated:e})},toggleMute:function(){this.isPlayerMuted?this.player.unMute():this.player.mute(),this.isPlayerMuted=!this.isPlayerMuted},updatePlayerVolume:function(){this.player.setVolume(this.playerVolume)},playNewSong:function(t){this.playerProgress=0,this.playingSong=t||this.station.songs[0],this.player.loadVideoById(this.playingSong.id)},songToggled:function(){var t=this;return Object(st["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.player.getPlayerState();case 2:n=e.sent,1===n?(t.pauseSong(),se.emit("player songPaused")):2===n&&(t.playSong(),se.emit("player songPlayed"));case 4:case"end":return e.stop()}}),e)})))()},pauseSong:function(){this.player.pauseVideo()},playSong:function(){this.player.playVideo()},songTimeUpdated:function(){var t=this.playerProgress*this.songDuration/100;this.updateSongTime(t),se.emit("player songTimeUpdated",t)},updateSongTime:function(t){this.player.seekTo(t)},playlistUpdated:function(t){var e=this;return Object(st["a"])(regeneratorRuntime.mark((function n(){var s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=t.findIndex((function(t){return t.id===e.playingSong.id})),-1===s&&e.newSongPlayed(e.nextSong,!0),n.next=4,e.$store.dispatch({type:"updatePlaylist",songs:t});case 4:se.emit("player playlistUpdated",t);case 5:case"end":return n.stop()}}),n)})))()},updatePlaylist:function(t){this.$store.commit({type:"updatePlaylist",songs:t})},shuffleSongs:function(){var t=JSON.parse(JSON.stringify(this.station.songs));jt(t),this.playlistUpdated(t)},toggleAddSong:function(){this.isAddSongOpen=!this.isAddSongOpen},addSong:function(t){var e=this;return Object(st["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.toggleAddSong(),n.next=3,e.$store.dispatch({type:"addSong",song:t});case 3:se.emit("player playlistUpdated",e.station.songs);case 4:case"end":return n.stop()}}),n)})))()},toggleChat:function(t){this.chatIsOn=!this.chatIsOn},addLike:function(){this.$store.dispatch({type:"addLike"})}},components:{songList:It,songAdd:Ht,chatRoom:me}},he=fe,ve=Object(g["a"])(he,Yt,Zt,!1,null,null,null),ye=ve.exports,be=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"user-signup"},[n("h2",[t._v("User Sign Up")]),n("form",{staticClass:"signup-form",on:{submit:function(e){return e.preventDefault(),t.signup(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.fullName,expression:"credentials.fullName"}],attrs:{type:"text",placeholder:"Username",required:""},domProps:{value:t.credentials.fullName},on:{input:function(e){e.target.composing||t.$set(t.credentials,"fullName",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.email,expression:"credentials.email"}],attrs:{type:"email",placeholder:"Email Address",required:""},domProps:{value:t.credentials.email},on:{input:function(e){e.target.composing||t.$set(t.credentials,"email",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.password,expression:"credentials.password"}],attrs:{type:"password",placeholder:"Password",required:""},domProps:{value:t.credentials.password},on:{input:function(e){e.target.composing||t.$set(t.credentials,"password",e.target.value)}}}),n("button",{staticClass:"buttons"},[t._v("Create Account")])]),n("p",[t._v(" Already a member? "),n("router-link",{attrs:{to:"/login"}},[t._v("Go to login page")])],1)])},we=[],Se={data:function(){return{credentials:{fullName:"",email:"",password:""}}},methods:{signup:function(){var t=this;return Object(st["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch({type:"signup",userCred:t.credentials});case 2:t.$router.push("/");case 3:case"end":return e.stop()}}),e)})))()}}},_e=Se,Ce=Object(g["a"])(_e,be,we,!1,null,null,null),xe=Ce.exports,ke=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"user-login"},[n("h2",[t._v("User Login")]),n("form",{staticClass:"login-form",on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.email,expression:"credentials.email"}],staticClass:"input",attrs:{type:"email",placeholder:"Email Address",required:""},domProps:{value:t.credentials.email},on:{input:function(e){e.target.composing||t.$set(t.credentials,"email",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.password,expression:"credentials.password"}],staticClass:"input",attrs:{type:"password",placeholder:"Password",required:""},domProps:{value:t.credentials.password},on:{input:function(e){e.target.composing||t.$set(t.credentials,"password",e.target.value)}}}),n("button",{staticClass:"buttons"},[t._v("Login")])]),n("p",[t._v(" New around? "),n("router-link",{attrs:{to:"/signup"}},[t._v("Create an account")])],1)])},Ue=[],Pe={data:function(){return{credentials:{email:"",password:""}}},methods:{login:function(){var t=this;return Object(st["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch({type:"login",userCred:t.credentials});case 2:t.$router.push("/");case 3:case"end":return e.stop()}}),e)})))()}}},Oe=Pe,Re=Object(g["a"])(Oe,ke,Ue,!1,null,null,null),je=Re.exports,$e=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Te=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"user-management"},[n("h2",[t._v("User Management")])])}],Me={name:"userManagement"},Ie=Me,Ne=Object(g["a"])(Ie,$e,Te,!1,null,null,null),Ee=Ne.exports,Be=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"user-profile"},[n("h2",[t._v(t._s(this.loggedinUser.fullName))]),n("section",{staticClass:"imgs-sec"},[n("img",{staticClass:"ratio-square profile-img-record-cover",attrs:{src:t.loggedinUser.imgUrl}}),n("img",{staticClass:"record-img",style:{backgroundImage:"url("+t.loggedinUser.imgUrl+")"},attrs:{src:"https://s3-us-west-2.amazonaws.com/s.cdpn.io/83141/vinyl.png"}})]),n("h3",[t._v("My stations:")]),t.loggedinUser.stations?n("ul",{staticClass:"user-stations"},t._l(this.loggedinUser.stations,(function(e){return n("li",{key:e._id,staticClass:"user-station-in-list"},[n("router-link",{attrs:{to:"/station/"+e._id}},[n("p",[t._v(t._s(e.name))]),n("img",{staticClass:"ratio-square",attrs:{src:e.imgUrl}})])],1)})),0):t._e()])},Ae=[],Le={name:"userProfile",computed:{loggedinUser:function(){return this.$store.getters.loggedinUser}}},qe=Le,De=Object(g["a"])(qe,Be,Ae,!1,null,null,null),ze=De.exports;s["a"].use(j["a"]);var Ve=[{path:"/",name:"homePage",component:K},{path:"/about",name:"aboutPage",component:tt},{path:"/station",name:"stationsPage",component:_t},{path:"/station/edit/:id?",name:"stationEdit",component:Qt},{path:"/station/:id",name:"stationDetails",component:ye},{path:"/signup",name:"userSignup",component:xe},{path:"/login",name:"userLogin",component:je},{path:"/user",name:"userManagement",component:Ee},{path:"/user/:id",name:"userProfile",component:ze}],He=new j["a"]({mode:"history",base:"/",routes:Ve}),Fe=He,Je=n("2f62"),Ge=n("ade3"),Ke={state:Object(Ge["a"])({stations:[],tags:[],filterBy:{name:"",tag:"",_sort:"name",_order:1},currStation:null},"tags",[]),getters:Object(Ge["a"])({stations:function(t){return t.stations},tags:function(t){return t.tags},currStation:function(t){return t.currStation},filterBy:function(t){return t.filterBy}},"tags",(function(t){return t.tags})),mutations:{setStations:function(t,e){var n=e.stations;t.stations=n},setTags:function(t,e){var n=e.tags;t.tags=n},setStation:function(t,e){var n=e.station;t.currStation=n},unsetStation:function(t){t.currStation=null},setFilterBy:function(t,e){var n=e.filterBy;t.filterBy=n},addStation:function(t,e){var n=e.station;t.stations.unshift(n)},removeStation:function(t,e){var n=e.stationId,s=t.stations.findIndex((function(t){return t._id===n}));-1!==s&&t.stations.splice(s,1)},updateStation:function(t,e){var n=e.station,s=t.stations.findIndex((function(t){return t._id===n._id}));-1!==s&&t.stations.splice(s,1,n)},addSong:function(t,e){var n=e.song,s=this.getters.loggedinUser;n.addedBy={_id:s._id,fullName:s.fullName,imgUrl:s.imgUrl},t.currStation.songs.push(n)},updatePlaylist:function(t,e){var n=e.songs;t.currStation.songs=n},addTag:function(t,e){var n=e.tag;t.currStation.tags.push(n),t.tags.includes(n)||t.tags.push(n)},removeTag:function(t,e){var n=e.tag,s=t.currStation.tags.findIndex((function(t){return t===n}));-1!==s&&t.currStation.tags.splice(s,1)},setStationName:function(t,e){var n=e.name;t.currStation.name=n},setStationImg:function(t,e){var n=e.imgUrl;t.currStation.imgUrl=n},addLike:function(t){t.currStation.likedBy.push(this.getters.loggedinUser)}},actions:{loadStations:function(t){return Object(st["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,dt.query(t.getters.filterBy);case 2:return n=e.sent,t.commit({type:"setStations",stations:n}),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))()},loadTags:function(t){return Object(st["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,dt.getTags();case 2:return n=e.sent,t.commit({type:"setTags",tags:n}),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))()},loadStation:function(t,e){var n=e.stationId;return Object(st["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,dt.getById(n);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=dt.getEmptyStation();case 7:return s=e.t0,t.commit({type:"setStation",station:s}),e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)})))()},setFilterBy:function(t,e){return t.commit(e),t.dispatch({type:"loadStations"})},saveStation:function(t,e){var n=e.station;return Object(st["a"])(regeneratorRuntime.mark((function e(){var s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(n),s=!!n._id,s||(r=t.getters.loggedinUser,n.createdBy={_id:r._id,fullName:r.fullName,imgUrl:r.imgUrl}),e.next=5,dt.save(n);case 5:return n=e.sent,s?t.commit({type:"updateStation",station:n}):t.commit({type:"addStation",station:n}),t.getters.isGuestUser||t.dispatch({type:"saveUserCreatedStation",station:n}),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))()},removeStation:function(t,e){return Object(st["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,dt.remove(stationId);case 2:t.commit(e),t.getters.isGuestUser||t.dispatch({type:"removeUserCreatedStation",station:station});case 4:case"end":return n.stop()}}),n)})))()},addSong:function(t,e){return Object(st["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.commit(e),n.next=3,t.dispatch({type:"saveStation",station:t.getters.currStation});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},updatePlaylist:function(t,e){return Object(st["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.commit(e),n.next=3,t.dispatch({type:"saveStation",station:t.getters.currStation});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},addLike:function(t,e){return Object(st["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.commit(e),n.next=3,t.dispatch({type:"saveStation",station:t.getters.currStation});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()}}},We={login:Xe,logout:Ye,signup:tn,getUsers:nn,getById:sn,remove:rn,update:an,getLoggedinUser:on};function Xe(t){return Qe.apply(this,arguments)}function Qe(){return Qe=Object(st["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ut.post("auth/login",e);case 2:return n=t.sent,t.abrupt("return",un(n));case 4:case"end":return t.stop()}}),t)}))),Qe.apply(this,arguments)}function Ye(){return Ze.apply(this,arguments)}function Ze(){return Ze=Object(st["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ut.post("auth/logout");case 2:sessionStorage.clear();case 3:case"end":return t.stop()}}),t)}))),Ze.apply(this,arguments)}function tn(t){return en.apply(this,arguments)}function en(){return en=Object(st["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ut.post("auth/signup",e);case 2:return n=t.sent,t.abrupt("return",un(n));case 4:case"end":return t.stop()}}),t)}))),en.apply(this,arguments)}function nn(){return ut.get("user")}function sn(t){return ut.get("user/".concat(t))}function rn(t){return ut.delete("user/".concat(t))}function an(t){var e=on();return e._id===t._id&&sessionStorage.setItem("user",JSON.stringify(t)),ut.put("user/".concat(t._id),t)}function on(){var t=sessionStorage.getItem("user");return t?JSON.parse(t):{_id:"5e792fc31c9d4400009c8229",fullName:"guest",imgUrl:"../img/user-icon.png",isAdmin:!1}}function un(t){return sessionStorage.setItem("user",JSON.stringify(t)),t}var cn={state:{loggedinUser:We.getLoggedinUser(),users:[]},getters:{loggedinUser:function(t){return t.loggedinUser},users:function(t){return t.toys},isGuestUser:function(t,e){return"guest"===e.loggedinUser.fullName&&!e.loggedinUser.email}},mutations:{setUser:function(t,e){var n=e.user;t.loggedinUser=n},setUsers:function(t,e){var n=e.users;t.users=n},removeUser:function(t,e){var n=e.userId;t.users=t.users.filter((function(t){return t._id!==n}))},saveUserCreatedStation:function(t,e){var n=e.station,s={_id:n._id,name:n.name,imgUrl:n.imgUrl},r=t.loggedinUser.stations.findIndex((function(t){return t._id===n._id}));-1===r?t.loggedinUser.stations.unshift(s):t.loggedinUser.stations.splice(r,1,s)},removeUserCreatedStation:function(t,e){var n=e.stationId,s=t.loggedinUser.stations.findIndex((function(t){return t._id===n}));-1===s&&t.loggedinUser.stations.splice(s,1)}},actions:{login:function(t,e){var n=e.userCred;return Object(st["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,We.login(n);case 2:if(s=e.sent,s){e.next=5;break}return e.abrupt("return");case 5:return t.commit({type:"setUser",user:s}),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})))()},signup:function(t,e){var n=e.userCred;return Object(st["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,We.signup(n);case 2:if(s=e.sent,s){e.next=5;break}return e.abrupt("return");case 5:return t.commit({type:"setUser",user:s}),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})))()},logout:function(t){return Object(st["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,We.logout();case 2:t.commit({type:"setUsers",users:[]}),t.commit({type:"setUser",user:We.getLoggedinUser()});case 4:case"end":return e.stop()}}),e)})))()},updateUser:function(t,e){var n=e.user;return Object(st["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,We.update(n);case 2:return n=e.sent,t.commit({type:"setUser",user:n}),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))()},loadUsers:function(t){return Object(st["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,We.getUsers();case 2:return n=e.sent,t.commit({type:"setUsers",users:n}),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))()},removeUser:function(t,e){var n=e.userId;return Object(st["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,We.remove(n);case 2:t.commit({type:"removeUser",userId:n});case 3:case"end":return e.stop()}}),e)})))()},saveUserCreatedStation:function(t,e){return Object(st["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.commit(e),n.next=3,t.dispatch({type:"updateUser",user:t.getters.loggedinUser});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},removeUserCreatedStation:function(t,e){return Object(st["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.commit(e),n.next=3,t.dispatch({type:"updateUser",user:t.getters.loggedinUser});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()}}};s["a"].use(Je["a"]);var ln=new Je["a"].Store({strict:!0,modules:{stationStore:Ke,userStore:cn}}),dn=(n("efc1"),n("b7e3"),n("e0ec")),gn=n.n(dn);s["a"].use(gn.a),s["a"].config.productionTip=!1,new s["a"]({router:Fe,store:ln,render:function(t){return t(O)}}).$mount("#app")},b7e3:function(t,e,n){},ba94:function(t,e,n){t.exports=n.p+"img/eq-play.d1a782b3.gif"},efc1:function(t,e,n){},f424:function(t,e,n){t.exports=n.p+"img/needl1.c066beab.png"}});
//# sourceMappingURL=app.b082c3ad.js.map